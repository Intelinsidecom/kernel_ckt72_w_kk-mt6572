#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
{0 ,4177},
{2 ,4147},
{5 ,4123},
{7 ,4099},
{9 ,4077},
{12 ,4055},
{14 ,4030},
{16 ,4007},
{19 ,3985},
{21 ,3966},
{23 ,3949},
{26 ,3933},
{28 ,3917},
{30 ,3902},
{33 ,3888},
{35 ,3874},
{37 ,3860},
{40 ,3849},
{42 ,3837},
{44 ,3826},
{47 ,3815},
{49 ,3805},
{51 ,3796},
{53 ,3788},
{56 ,3780},
{58 ,3773},
{60 ,3768},
{63 ,3763},
{65 ,3758},
{67 ,3753},
{70 ,3748},
{72 ,3743},
{74 ,3737},
{77 ,3730},
{79 ,3723},
{81 ,3715},
{84 ,3705},
{86 ,3692},
{88 ,3677},
{91 ,3657},
{93 ,3632},
{95 ,3596},
{98 ,3545},
{100,3482},
{100,3451},
{100,3438},
{100,3426}
};

// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
{0 ,4177},
{2 ,4150},
{4 ,4127},
{7 ,4106},
{9 ,4085},
{11 ,4065},
{13 ,4043},
{16 ,4021},
{18 ,4000},
{20 ,3981},
{22 ,3962},
{24 ,3945},
{27 ,3929},
{29 ,3914},
{31 ,3898},
{33 ,3884},
{36 ,3871},
{38 ,3859},
{40 ,3847},
{42 ,3836},
{44 ,3827},
{47 ,3818},
{49 ,3810},
{51 ,3802},
{53 ,3795},
{56 ,3789},
{58 ,3784},
{60 ,3779},
{62 ,3775},
{64 ,3771},
{67 ,3767},
{69 ,3762},
{71 ,3757},
{73 ,3750},
{76 ,3743},
{78 ,3735},
{80 ,3726},
{82 ,3717},
{84 ,3708},
{87 ,3699},
{89 ,3688},
{91 ,3675},
{93 ,3655},
{96 ,3613},
{98 ,3539},
{100,3444},
{100,3358}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
{0 ,4171},
{2 ,4146},
{4 ,4123},
{7 ,4101},
{9 ,4080},
{11 ,4061},
{13 ,4042},
{15 ,4022},
{18 ,4003},
{20 ,3986},
{22 ,3971},
{24 ,3956},
{26 ,3942},
{28 ,3928},
{31 ,3915},
{33 ,3902},
{35 ,3890},
{37 ,3876},
{39 ,3861},
{42 ,3843},
{44 ,3828},
{46 ,3815},
{48 ,3805},
{50 ,3797},
{53 ,3790},
{55 ,3784},
{57 ,3779},
{59 ,3775},
{61 ,3772},
{64 ,3770},
{66 ,3768},
{68 ,3766},
{70 ,3764},
{72 ,3760},
{75 ,3756},
{77 ,3749},
{79 ,3741},
{81 ,3731},
{83 ,3720},
{85 ,3703},
{88 ,3684},
{90 ,3665},
{92 ,3653},
{94 ,3641},
{96 ,3618},
{99 ,3519},
{100,3329}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
{0 ,4173},
{2 ,4146},
{4 ,4123},
{7 ,4103},
{9 ,4081},
{11 ,4061},
{13 ,4042},
{15 ,4023},
{17 ,4005},
{20 ,3989},
{22 ,3973},
{24 ,3958},
{26 ,3944},
{28 ,3930},
{31 ,3917},
{33 ,3905},
{35 ,3892},
{37 ,3881},
{39 ,3870},
{42 ,3858},
{44 ,3842},
{46 ,3824},
{48 ,3810},
{50 ,3801},
{52 ,3793},
{55 ,3787},
{57 ,3782},
{59 ,3777},
{61 ,3773},
{63 ,3770},
{66 ,3768},
{68 ,3766},
{70 ,3764},
{72 ,3758},
{74 ,3747},
{77 ,3740},
{79 ,3732},
{81 ,3722},
{83 ,3712},
{85 ,3697},
{87 ,3679},
{90 ,3660},
{92 ,3650},
{94 ,3639},
{96 ,3618},
{98 ,3528},
{100,3351}
};

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
{1212,4177},
{1212,4147},
{1215,4123},
{1208,4099},
{1208,4077},
{1203,4055},
{1191,4030},
{1178,4007},
{1170,3985},
{1162,3966},
{1153,3949},
{1150,3933},
{1148,3917},
{1141,3902},
{1139,3888},
{1138,3874},
{1140,3860},
{1135,3849},
{1144,3837},
{1141,3826},
{1148,3815},
{1153,3805},
{1153,3796},
{1157,3788},
{1156,3780},
{1163,3773},
{1173,3768},
{1183,3763},
{1192,3758},
{1212,3753},
{1229,3748},
{1252,3743},
{1281,3737},
{1309,3730},
{1345,3723},
{1396,3715},
{1450,3705},
{1511,3692},
{1602,3677},
{1720,3657},
{1879,3632},
{2108,3596},
{2485,3545},
{2880,3482},
{3175,3451},
{3141,3438},
{3112,3426}
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
{773 ,4177},
{773 ,4150},
{660 ,4127},
{670 ,4106},
{672 ,4085},
{668 ,4065},
{668 ,4043},
{667 ,4021},
{659 ,4000},
{652 ,3981},
{647 ,3962},
{667 ,3945},
{635 ,3929},
{638 ,3914},
{629 ,3898},
{629 ,3884},
{624 ,3871},
{632 ,3859},
{624 ,3847},
{627 ,3836},
{632 ,3827},
{633 ,3818},
{636 ,3810},
{632 ,3802},
{634 ,3795},
{642 ,3789},
{643 ,3784},
{643 ,3779},
{654 ,3775},
{653 ,3771},
{657 ,3767},
{662 ,3762},
{663 ,3757},
{666 ,3750},
{674 ,3743},
{678 ,3735},
{681 ,3726},
{695 ,3717},
{721 ,3708},
{760 ,3699},
{835 ,3688},
{936 ,3675},
{1062,3655},
{1184,3613},
{1344,3539},
{1598,3444},
{1853,3358}
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
{147,4171},
{147,4146},
{149,4123},
{153,4101},
{157,4080},
{163,4061},
{169,4042},
{177,4022},
{181,4003},
{187,3986},
{194,3971},
{198,3956},
{207,3942},
{209,3928},
{213,3915},
{216,3902},
{218,3890},
{212,3876},
{202,3861},
{185,3843},
{169,3828},
{162,3815},
{158,3805},
{156,3797},
{157,3790},
{157,3784},
{161,3779},
{163,3775},
{164,3772},
{168,3770},
{172,3768},
{171,3766},
{169,3764},
{171,3760},
{169,3756},
{167,3749},
{167,3741},
{168,3731},
{174,3720},
{173,3703},
{172,3684},
{170,3665},
{188,3653},
{234,3641},
{308,3618},
{303,3519},
{339,3329}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
{113,4173},
{113,4146},
{83 ,4123},
{90 ,4103},
{89 ,4081},
{90 ,4061},
{94 ,4042},
{95 ,4023},
{98 ,4005},
{103,3989},
{105,3973},
{110,3958},
{115,3944},
{116,3930},
{122,3917},
{127,3905},
{130,3892},
{137,3881},
{137,3870},
{137,3858},
{124,3842},
{102,3824},
{91 ,3810},
{87 ,3801},
{87 ,3793},
{88 ,3787},
{92 ,3782},
{94 ,3777},
{98 ,3773},
{102,3770},
{106,3768},
{109,3766},
{111,3764},
{106,3758},
{93 ,3747},
{96 ,3740},
{97 ,3732},
{97 ,3722},
{102,3712},
{101,3697},
{103,3679},
{98 ,3660},
{105,3650},
{124,3639},
{151,3618},
{151,3528},
{172,3351}
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 },
{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

